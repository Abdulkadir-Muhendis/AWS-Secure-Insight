<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AWS Demo Kit: aws_demo_kit/src/aws_client_task.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AWS Demo Kit
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7a695e9520f20ecf5b1bc1f877eb7dd2.html">aws_demo_kit</a></li><li class="navelem"><a class="el" href="dir_8350049628bdba08ab48d6c96b2f59e6.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">aws_client_task.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>AWS IoT Demo kit.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;atecc508cb.h&quot;</code><br />
<code>#include &quot;tls/atcatls_cfg.h&quot;</code><br />
<code>#include &quot;<a class="el" href="aws__iot__config_8h_source.html">aws_iot_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="aws__net__interface_8h_source.html">aws_net_interface.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="aws__main__task_8h_source.html">aws_main_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="aws__user__task_8h_source.html">aws_user_task.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="aws__client__task_8h_source.html">aws_client_task.h</a>&quot;</code><br />
<code>#include &quot;aws/jsonlib/parson.h&quot;</code><br />
</div>
<p><a href="aws__client__task_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac529104ebcd30f72c74970089e6a284e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gac529104ebcd30f72c74970089e6a284e">aws_client_mqtt_packet_id</a> (void)</td></tr>
<tr class="memdesc:gac529104ebcd30f72c74970089e6a284e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns packet ID.  <a href="group___client.html#gac529104ebcd30f72c74970089e6a284e">More...</a><br /></td></tr>
<tr class="separator:gac529104ebcd30f72c74970089e6a284e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76ee007926e678e8abb9c47885b3df3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#ga76ee007926e678e8abb9c47885b3df3a">aws_client_scan_button</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:ga76ee007926e678e8abb9c47885b3df3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a button is pressed or not.  <a href="group___client.html#ga76ee007926e678e8abb9c47885b3df3a">More...</a><br /></td></tr>
<tr class="separator:ga76ee007926e678e8abb9c47885b3df3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae92b41c0188881e52fe98f7d49aea80f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gae92b41c0188881e52fe98f7d49aea80f">aws_client_mqtt_msg_cb</a> (MqttClient *mqttCli, MqttMessage *msg, uint8_t new, uint8_t done)</td></tr>
<tr class="memdesc:gae92b41c0188881e52fe98f7d49aea80f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe the Delta topic if a difference is detected between the Reported and Desired sections of a Thing shadow. aws_client_mqtt_msg_cb will be called, if there is a difference.  <a href="group___client.html#gae92b41c0188881e52fe98f7d49aea80f">More...</a><br /></td></tr>
<tr class="separator:gae92b41c0188881e52fe98f7d49aea80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae589fbe24e684fc1d21be325c1f94ea5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gae589fbe24e684fc1d21be325c1f94ea5">aws_client_tls_cb</a> (MqttClient *mqttCli)</td></tr>
<tr class="memdesc:gae589fbe24e684fc1d21be325c1f94ea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">AWS IoT authenticates Things using X.509 certificates. In addition to it, all traffic to and from AWS IoT MUST be encrypted over Transport Layer Security(TLS). So the WolfSSL library is responsible for the TLS layer.  <a href="group___client.html#gae589fbe24e684fc1d21be325c1f94ea5">More...</a><br /></td></tr>
<tr class="separator:gae589fbe24e684fc1d21be325c1f94ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga756a3b06de41ba1bb65b34684e8ecf54"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#ga756a3b06de41ba1bb65b34684e8ecf54">aws_client_mqtt_disconnect</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:ga756a3b06de41ba1bb65b34684e8ecf54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send disconnection MQTT packet.  <a href="group___client.html#ga756a3b06de41ba1bb65b34684e8ecf54">More...</a><br /></td></tr>
<tr class="separator:ga756a3b06de41ba1bb65b34684e8ecf54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3d79b09e40636300e64ad322ae1203d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gab3d79b09e40636300e64ad322ae1203d">aws_client_init_mqtt_client</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:gab3d79b09e40636300e64ad322ae1203d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function initializes WolfMQTT client, and tries to connect to destination address depending on a user AWS account. The host address should be installed in ATECC508A through Insight GUI.  <a href="group___client.html#gab3d79b09e40636300e64ad322ae1203d">More...</a><br /></td></tr>
<tr class="separator:gab3d79b09e40636300e64ad322ae1203d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9bf67404b5bec30b4046188c574b6a84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#ga9bf67404b5bec30b4046188c574b6a84">aws_client_mqtt_subscribe</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:ga9bf67404b5bec30b4046188c574b6a84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe the Delta topic if a difference is detected between the Reported and Desired sections of a Thing shadow. aws_client_mqtt_msg_cb will be called, if there is a difference.  <a href="group___client.html#ga9bf67404b5bec30b4046188c574b6a84">More...</a><br /></td></tr>
<tr class="separator:ga9bf67404b5bec30b4046188c574b6a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae10b9e14b2c0492e014a0b190b91ca9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gaae10b9e14b2c0492e014a0b190b91ca9">aws_client_mqtt_publish</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:gaae10b9e14b2c0492e014a0b190b91ca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send Thing's current state to the Thing Shadow service by sending an MQTT message to the Update topic. Insight GUI also will subscribe the Delta topic to synchronize Thing Shadow with Thing.  <a href="group___client.html#gaae10b9e14b2c0492e014a0b190b91ca9">More...</a><br /></td></tr>
<tr class="separator:gaae10b9e14b2c0492e014a0b190b91ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa9271e75333e074f8bef036d7d72ffec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gaa9271e75333e074f8bef036d7d72ffec">aws_client_mqtt_wait_msg</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:gaa9271e75333e074f8bef036d7d72ffec"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a user makes change LEDs state using Insight GUI, it will send the Update topic to AWS broker. Then AWS IoT also will send the Delta topic for Thing to read it.  <a href="group___client.html#gaa9271e75333e074f8bef036d7d72ffec">More...</a><br /></td></tr>
<tr class="separator:gaa9271e75333e074f8bef036d7d72ffec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad3f7437789ea57977c47957f292a4ca2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gad3f7437789ea57977c47957f292a4ca2">aws_client_state_machine</a> (<a class="el" href="group___a_w_s.html#ga7ebf27c3fb1fb1f1efe5d7a0c72761ad">t_aws_kit</a> *kit)</td></tr>
<tr class="memdesc:gad3f7437789ea57977c47957f292a4ca2"><td class="mdescLeft">&#160;</td><td class="mdescRight">State machine for AWS MQTT client.  <a href="group___client.html#gad3f7437789ea57977c47957f292a4ca2">More...</a><br /></td></tr>
<tr class="separator:gad3f7437789ea57977c47957f292a4ca2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8ddb437ec3069ff55d9b6fe23461da9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___client.html#gaf8ddb437ec3069ff55d9b6fe23461da9">aws_client_task</a> (void *params)</td></tr>
<tr class="memdesc:gaf8ddb437ec3069ff55d9b6fe23461da9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This Client task runs MQTT client application based on WolfMQTT library under SSL/TLS library which is WolfSSL. Before getting start this task, ATECC508 should be provisioned for certificate assignment to WolfSSL library. This task is basically to implement the AWS JITR feature.(Just In Time Registation.) Each connected device needs a credential to access the Thing Shadow service. All traffic to and from AWS IoT MUST be kept safe in order to send data securely to the message broker.  <a href="group___client.html#gaf8ddb437ec3069ff55d9b6fe23461da9">More...</a><br /></td></tr>
<tr class="separator:gaf8ddb437ec3069ff55d9b6fe23461da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>AWS IoT Demo kit. </p>
<p>Copyright (c) 2014-2016 Atmel Corporation. All rights reserved.</p>

<p>Definition in file <a class="el" href="aws__client__task_8c_source.html">aws_client_task.c</a>.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.12
</small></address>
</body>
</html>
